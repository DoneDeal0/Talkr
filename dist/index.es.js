import*as e from"react";import{createContext as n,useState as a,useContext as t}from"react";var r=function(e,n){return void 0===n&&(n=!1),n?function(e){return"undefined"!=typeof navigator?navigator.language.split("-")[0]:e}(e):e},u=function(){return(u=Object.assign||function(e){for(var n,a=1,t=arguments.length;a<t;a++)for(var r in n=arguments[a])Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e}).apply(this,arguments)};function o(e,n,a){var t=e.locale,r=e.languages,o=e.defaultLanguage,l=r[t]?t:o,c=r[l],g=n;if(a&&Object.keys(a).includes("count")){var i=new Intl.PluralRules(l).select(a.count);g=0===a.count?"".concat(n,".zero"):"other"===i?"".concat(n,".many"):"".concat(n,".").concat(i)}if(g.split(".").forEach((function(e){if(c[e])return c=c[e]})),"string"!=typeof c)return console.warn("Talkr: Missing translation for ".concat(n)),null;var f=a&&Object.entries(a).reduce((function(e,n){var a;return u(u({},e),((a={})[n[0]]=n[1].toString(),a))}),{});return f?c.split("__").map((function(e){return f[e]?f[e]:e})).join(""):c}var l=n({locale:"",setLocale:function(){return null},languages:{},defaultLanguage:""});function c(n){var t=n.children,u=n.languages,o=n.defaultLanguage,c=n.detectBrowserLanguage,g=a(r(o,c)),i=g[0],f=g[1];return e.createElement(l.Provider,{value:{locale:i,setLocale:f,languages:u,defaultLanguage:o}},t)}function g(){var e=t(l),n=e.locale,a=e.languages,r=e.defaultLanguage,u=e.setLocale;return{languages:a,defaultLanguage:r,locale:n,setLocale:u,T:function(e,t){return o({locale:n,languages:a,defaultLanguage:r},e,t)}}}export{c as Talkr,l as TalkrContext,o as tr,g as useT};
