import*as e from"react";import{createContext as t,useState as n,useContext as r}from"react";var a=function(){return(a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};var o=function(e,t){return void 0===t&&(t=!1),t?function(e){return"undefined"!=typeof navigator?navigator.language.split("-")[0]:e}(e):e};function c(e,t,n){var r=e.locale,o=e.languages,c=e.defaultLanguage,u=o[r]?r:c,l=o[u],i=t;if(n&&Object.keys(n).includes("count")){var f=new Intl.PluralRules(u).select(n.count);i=0===n.count?"".concat(t,".zero"):"other"===f?"".concat(t,".many"):"".concat(t,".").concat(f)}if(i.split(".").forEach((function(e){if(l[e])return l=l[e]})),"string"!=typeof l)return console.warn("Talkr: Missing translation for ".concat(t)),null;var s=n&&Object.entries(n).reduce((function(e,t){var n;return a(a({},e),((n={})[t[0]]=t[1].toString(),n))}),{});return s?l.split("__").map((function(e){return s[e]?s[e]:e})).join(""):l}var u=t({locale:"",setLocale:function(){return null},languages:{},defaultLanguage:""});function l(t){var r=t.children,a=t.languages,c=t.defaultLanguage,l=t.detectBrowserLanguage,i=n(o(c,l)),f=i[0],s=i[1];return e.createElement(u.Provider,{value:{locale:f,setLocale:s,languages:a,defaultLanguage:c}},r)}function i(){var e=r(u),t=e.setLocale,n=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}(e,["setLocale"]);return a(a({},n),{setLocale:t,T:function(e,t){return c(n,e,t)}})}export{l as Talkr,u as TalkrContext,c as tr,i as useT};
